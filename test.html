<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dataset Visualization</title>
    <!-- Include Plotly.js library -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body>
    <h1>Dataset Visualization</h1>
    <label for="dataset">Select Dataset:</label>
    <select id="dataset">
      <option value="SMS">SMS</option>
      <option value="Twitter">Twitter</option>
      <option value="YouTube">YouTube</option>
    </select>
    <br />
    <label for="plotFunction">Select Plot Function:</label>
    <select id="plotFunction">
      <option value="Histogram">Histogram</option>
      <option value="Scatter">Scatter</option>
    </select>
    <br />
    <label for="colorScheme">Select Color Scheme:</label>
    <select id="colorScheme">
      <option value="Viridis">Viridis</option>
      <option value="Plasma">Plasma</option>
      <option value="Inferno">Inferno</option>
      <!-- Add more color schemes as needed -->
    </select>
    <br />
    <button id="generateButton">Generate Plot</button>
    <div id="plotContainer"></div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const generateButton = document.getElementById("generateButton");
        generateButton.addEventListener("click", generatePlot);
      });

      function generatePlot() {
        const datasetOption = document.getElementById("dataset").value;
        const plotFunction = document.getElementById("plotFunction").value;
        const colorScheme = document.getElementById("colorScheme").value;

        fetchPlotData(datasetOption, plotFunction, colorScheme);
      }

      function fetchPlotData(datasetOption, plotFunction, colorScheme) {
        // Implement your data fetching logic here using JavaScript
        // Replace the following with actual fetched data
        const data = {}; // Replace with fetched data
        const cleanedData = {}; // Replace with fetched cleaned data

        if (plotFunction === "Histogram") {
          plotHistogram(data, datasetOption, "message", colorScheme);
          plotHistogram(
            cleanedData,
            datasetOption,
            "cleaned_message",
            colorScheme
          );
        } else if (plotFunction === "Scatter") {
          plotScatter(data, datasetOption, "message", colorScheme);
          plotScatter(
            cleanedData,
            datasetOption,
            "cleaned_message",
            colorScheme
          );
        }
      }

      function plotHistogram(data, datasetName, columnName, colorScheme) {
        const wordCounts = data[columnName].map(
          (message) => message.split(" ").length
        );

        const trace = {
          x: wordCounts,
          type: "histogram",
          colorscale: colorScheme,
          xaxis: "x",
          yaxis: "y",
          title: `The distribution of the ${datasetName} dataset based on the number of words in each instance (${columnName})`,
          xaxis_title: "Instance Length (Number of Words)",
          yaxis_title: "Frequency",
        };

        Plotly.newPlot("plotContainer", [trace]);
      }

      function plotScatter(data, datasetName, columnName, colorScheme) {
        const wordCounts = data[columnName].map(
          (message) => message.split(" ").length
        );

        const trace = {
          x: wordCounts,
          y: wordCounts,
          mode: "markers",
          marker: {
            color: wordCounts,
            colorscale: colorScheme,
          },
          type: "scatter",
          title: `The scatter plot of the ${datasetName} dataset based on the number of words in each instance (${columnName})`,
          xaxis: "x",
          yaxis: "y",
          xaxis_title: "Instance Index",
          yaxis_title: "Instance Length (Number of Words)",
        };

        Plotly.newPlot("plotContainer", [trace]);
      }
    </script>
  </body>
</html>
